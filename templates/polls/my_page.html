{% extends 'base.html' %}
{% block content %}

<h3 class="text-center mt-2">마이 페이지</h3>

{% if user.is_authenticated %} <!-- 사용자 로그인이 감지된 경우-->
<div class="text-end pe-3">
    <button id="createBoard" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createBoardModal">
        <i class="bi bi-plus-lg"></i> 보드 만들기
    </button>
</div>
{% else %} <!-- 사용자 로그인이 되어 있지 않은 상태 -->
<div>
    <p style="display: inline;">보드를 생성하려면 <a href="{% url 'login' %}">로그인</a>을 해야 합니다.</p>
</div>
{% endif %}

<br/>
<!-- 카드들 -->
<div class="container text-center">
    <div class="row row-cols-auto justify-content-center">
    {% for board in boards %}
        <div class="card col m-2 shadow">
            <div class="card-body">
                <h5 class="card-title">{{ board.name }}</h5>
                <p class="card-text">Created by: {{ board.created_by.username }}</p>
                {% if board.has_image %}
                <p class="card-text">Image Included</p>
                {% elif board.has_video %}
                <p class="card-text">Video Included</p>
                {% else %}
                <p class="card-text">No Media</p>
                {% endif %}
                <button type="submit" class="btn btn-secondary btn-sm">투표하기</button>
            </div>
        </div>
    {% endfor %}
    </div>
</div>


<!-- 모달 다이얼로그 -->
<div class="modal fade" id="createBoardModal" tabindex="-1" aria-labelledby="createBoardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createBoardModalLabel">보드 만들기</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- 여기에 내용을 넣으세요 -->
                <form id="createBoardForm">
                    <div class="mb-3">
                        <label for="boardName" class="form-label">보드 이름</label>
                        <input type="text" class="form-control" id="boardName" name="boardName" required>
                    </div>
                    <!-- Start Time -->
                    <div class="mb-3">
                        <label for="startTime" class="form-label">시작 시간</label>
                        <input
                            type="datetime-local"
                            class="form-control"
                            id="startTime"
                            name="start_time"
                            required>
                    </div>
                    <!-- End Time -->
                    <div class="mb-3">
                        <label for="endTime" class="form-label">종료 시간</label>
                        <input
                            type="datetime-local"
                            class="form-control"
                            id="endTime"
                            name="end_time"
                            required>
                    </div>
                    <!-- Activate -->
                    <div class="form-check mb-3">
                        <input
                            type="checkbox"
                            class="form-check-input"
                            id="activate"
                            name="activate">
                        <label for="activate" class="form-check-label">활성화</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                <button type="submit" class="btn btn-primary" form="createBoardForm">만들기</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}
{% extends 'sub-base.html' %}

{% block content %}
<div class="container mt-2">
    <h2 class="mb-4 text-center">투표 결과 보기</h2>
    <div class="mb-3 row">
        <label for="name" class="col-form-label col-sm-3">보드 이름</label>
        <div class="col-sm-9">
            <input type="text" class="form-control" id="name" name="name" value="{{ board.name }}" placeholder="보드의 이름을 입력하세요" disabled>
        </div>
    </div>
    <div class="mb-3 row">
        <label for="start_time" class="col-sm-3 col-form-label">투표 시작 시각</label>
        <div class="col-sm-9">
            <input type="datetime-local" class="form-control" id="start_time" name="start_time"
                   value="{{ board.start_time|date:'Y-m-d H:i'}}" disabled>
        </div>
    </div>
    <div class="mb-3 row">
        <label for="end_time" class="col-sm-3 col-form-label">투표 종료 시각</label>
        <div class="col-sm-9">
            <input type="datetime-local" class="form-control" id="end_time" name="end_time"
                   value="{{ board.end_time|date:'Y-m-d H:i'}}" disabled>
        </div>
    </div>
</div>

<!-- 질문들 -->
<div class="container mt-2">
{% for question in questions %}
    <div class="card mb-2 shadow">
        <div class="card-body">
            <div class="card-title d-flex justify-content-between">
                <div class="fw-bolder">{{ question.text }}</div>
            </div>
            <div class="row">
                <div class="col-6 px-2">
                {% if question.media_type == 'image' %}
                    <img src="{{ question.media_url }}" alt="Image" class="img-thumbnail">
                {% elif question.media_type == 'video' %}
                    <iframe width="100%" height="360" src="https://www.youtube.com/embed/{{ question.video_id }}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                {% else %}
                    <p>-- 미디어가 없습니다 --</p>
                {% endif %}
                </div>
                <div class="col-6 px-2">
                    {% for choice in question.choices %}
                        <div class="form-check">
                            <input class="form-check-input" type="radio"
                                   name="question-{{ question.id }}"
                                   id="choice-{{ choice.id }}"
                                   value="{{ choice.id }}">
                            <label class="form-check-label" for="choice-{{ choice.id }}">
                                {{ choice.text }}
                            </label>
                        </div>
                    {% empty %}
                        <li>이 질문에는 선택지가 없습니다.</li>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
{% empty %}
이 보드에는 아직 질문이 없습니다. "질문 만들기" 버튼을 눌러 만드세요.
{% endfor %}
</div>

<div class="text-center my-4">
    <button type="button" class="btn btn-primary" id="backBtn">
        <i class="bi bi-arrow-return-left"></i>
        돌아가기
    </button>
</div>

<script>
    document.getElementById("backBtn").addEventListener("click", function () {
        window.history.back(); // 브라우저 히스토리에서 이전 페이지로 이동
    });
</script>
{% endblock %}